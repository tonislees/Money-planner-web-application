{% extends "layout.html" %}
{% block sisu %}
    <div class="user-container">
        <div class="user-info">
            <div class="profile-pic">
                <img class="profile-pic-image" src="{{ img_file }}" alt="profile picture">
            </div>
            <div class="username">
                <span class="username-text text">{{ current_user.username.capitalize() }}</span>
                <span class="text text-xs">{{ current_user.email }}</span>
            </div>
        </div>
        <div class="settings-form-container">
            <form method="POST" action="" novalidate enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <fieldset>
                    <legend class="account-form-legend text account-form-text text-l">User info</legend>
                    <div class="form-pair">
                        {{ form.username.label(class="text text-s account-form-text") }}
                        {% if form.username.errors %}
                            {{ form.username(class="text text-s form-text invalid-div") }}
                            {% for error in form.username.errors %}
                                <div>
                                    <span class="error-text text text-xxs">{{ error }}</span>
                                </div>
                            {% endfor %}
                        {% else %}
                            {{ form.username(class="text text-s form-text") }}
                        {% endif %}
                    </div>
                    <div class="form-pair">
                        {{ form.email.label(class="text text-s account-form-text") }}
                        {% if form.email.errors %}
                            {{ form.email(class="text text-s form-text invalid-div") }}
                            {% for error in form.email.errors %}
                                <div>
                                    <span class="error-text text text-xxs">{{ error }}</span>
                                </div>
                            {% endfor %}
                        {% else %}
                            {{ form.email(class="text text-s form-text") }}
                        {% endif %}
                    </div>
                    <div class="buttons-container">
                        <div class="form-pair">
                            {{ form.picture(id="file-upload") }}
                            <label for="file-upload" class="custom-file-upload text text-xs" id="file-upload-label">
                                New profile picture
                            </label>
                            {% if form.picture.errors %}
                                {% for error in form.picture.errors %}
                                    <div>
                                        <span class="error-text text text-xxs">{{ error }}</span>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="form-pair">
                            {{ form.default_picture(id="default-picture") }}
                            <label for="default-picture" class="custom-file-upload text text-xs" id="default-picture-label">
                                Reset profile picture
                            </label>
                        </div>
                    </div>
                </fieldset>
                <div class="form-pair">
                    {{ form.submit(class="submit-btn text text-s") }}
                </div>
            </form>
        </div>
    </div>
{% endblock sisu %}